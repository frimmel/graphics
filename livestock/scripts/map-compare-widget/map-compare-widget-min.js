!function(e){function t(t,i,o){var d=e(t).find(" div."+i+"-container");d.find("label").html(o.name);var c="radio"===o.type?"radio":"drop-down";d.append(r[c]);var s=d.find(".image-selector"),l=e(t+" img.image-"+i),u=e(t+" img.image-"+i+"-legend"),f=o.images;"radio"===c?(n(s,l,u,f),s.parent().removeClass("four").addClass("twelve"),d.find(".filler-container").hide()):a(s,l,u,f),1===o.images.length&&d.hide()}function n(t,n,a,o){var r=i(o.length);e.each(o,function(){var n=e("<label />").addClass(r);n.append(e('<input type="radio" name="sl" />').val(this.source).data("legend",this.legend)),n.append(e('<span class="label-body" />').text(this.name)),t.append(n),this["default"]&&(e('input[name=sl][value="'+this.source+'"]').prop("checked",!0),n.addClass("on"),a.attr("src",this.legend)),n.click(function(){e(this).siblings().removeClass("on"),e(this).addClass("on")})}),t.on("change",function(){n.attr("src",e("input[name='sl']:checked").val()),a.attr("src",e("input[name='sl']:checked").data("legend"))})}function i(e){var t="nem-mcw-button-";switch(e){case 1:t+="whole";break;case 2:t+="half";break;case 3:t+="third";break;case 4:t+="fourth";break;case 5:t+="fifth";break;default:t+="default"}return t}function a(t,n,i,a){e.each(a,function(){t.append(e("<option />").val(this.source).text(this.name).data("legend",this.legend)),this["default"]&&(t.val(this.source),i.attr("src",this.legend))}),t.on("change",function(){n.attr("src",e(this).val()),i.attr("src",e(this).data("legend"))})}function o(e){var t=e.leftSelector,n=e.rightSelector,i='<div class="nem-mcw-container main-container" style="display: none;"><div class="nem-mcw-row">';return t&&(i+='<div class="four nem-mcw-columns left-container"><label></label></div>'),(t&&"radio"===t.type||n&&"radio"===n.type)&&(i+='<div class="four nem-mcw-columns filler-container"></div>'),n&&(i+='<div class="four nem-mcw-columns right-container"><label></label></div>'),i+='</div><div class="nem-mcw-row"><div class="twelve nem-mcw-columns twentytwenty-container"><div class="image-slider">',t&&(i+='<img class="image-left twentytwenty-before" />'),n&&(i+='<img class="image-right twentytwenty-after" />'),t&&n&&(i+='<div class="fader"></div>'),i+="</div>",t&&t.images[0].legend&&(i+='<img class="image-left-legend twentytwenty-legend" />'),n&&n.images[0].legend&&(i+='<img class="image-right-legend twentytwenty-legend" />'),i+="</div></div></div>"}e.widget("nemac.mapCompare",{options:{config:{}},_create:function(){this.element.empty();var t=this,n="#"+e(this.element).attr("id");"string"==typeof this.options.config?e.getJSON(this.options.config,function(e){t.element.html(o(e)),t._deployApp(e,n)}):(this.element.html(o(this.options.config)),this._deployApp(this.options.config,n))},_deployApp:function(n,i){n.leftSelector&&t(i,"left",n.leftSelector),n.rightSelector&&t(i,"right",n.rightSelector),e(i).find(".image-selector").trigger("change"),"fade"===n.type?(e(i).find("img.image-left").on("load",function(){e(i).find("div.twentytwenty-container").height(e(this).height())}),e(i).find(".fader").append('<label>slide to compare</label><br /><input type="range" min="0" max="1" step="0.01" value="'+n.defaultSlidePosition+'" />'),e(i).find(".fader").val("0").on("input change",function(t){e(i).find(".image-left").css("opacity",1-t.target.value)}),e(i).find(".image-left").css("opacity",1-n.defaultSlidePosition)):setTimeout(function(){e(i).find(".image-slider").twentytwenty({default_offset_pct:n.defaultSlidePosition})},300),e(i).find("div.main-container").show()}});var r={radio:'<form class="image-selector"></form>',"drop-down":'<select class="nem-mcw-u-full-width image-selector"></select>'};e.fn.twentytwenty=function(t){var t=e.extend({default_offset_pct:.5,orientation:"horizontal"},t);return this.each(function(){var n=t.default_offset_pct,i=e(this),a=t.orientation,o="vertical"===a?"down":"left",r="vertical"===a?"up":"right";i.wrap("<div class='twentytwenty-wrapper twentytwenty-"+a+"'></div>"),i.append("<div class='twentytwenty-overlay'></div>");var d=i.find("img:first"),c=i.find("img:last");i.append("<div class='twentytwenty-handle'></div>");var s=i.find(".twentytwenty-handle");s.append("<span class='twentytwenty-"+o+"-arrow'></span>"),s.append("<span class='twentytwenty-"+r+"-arrow'></span>"),i.addClass("twentytwenty-container"),d.addClass("twentytwenty-before"),c.addClass("twentytwenty-after");var l=i.find(".twentytwenty-overlay");l.append("<div class='twentytwenty-before-label'></div>"),l.append("<div class='twentytwenty-after-label'></div>");var u=function(e){var t=d.width(),n=d.height();return{w:t+"px",h:n+"px",cw:e*t+"px",ch:e*n+"px"}},f=function(e){"vertical"===a?d.css("clip","rect(0,"+e.w+","+e.ch+",0)"):d.css("clip","rect(0,"+e.cw+","+e.h+",0)"),i.css("height",e.h)},m=function(e){var t=u(e);s.css("vertical"===a?"top":"left","vertical"===a?t.ch:t.cw),f(t)};e(window).on("resize.twentytwenty",function(e){m(n)});var p=0,v=0;s.on("movestart",function(e){(e.distX>e.distY&&e.distX<-e.distY||e.distX<e.distY&&e.distX>-e.distY)&&"vertical"!==a?e.preventDefault():(e.distX<e.distY&&e.distX<-e.distY||e.distX>e.distY&&e.distX>-e.distY)&&"vertical"===a&&e.preventDefault(),i.addClass("active"),p=i.offset().left,offsetY=i.offset().top,v=d.width(),imgHeight=d.height()}),s.on("moveend",function(e){i.removeClass("active")}),s.on("move",function(e){i.hasClass("active")&&(n="vertical"===a?(e.pageY-offsetY)/imgHeight:(e.pageX-p)/v,0>n&&(n=0),n>1&&(n=1),m(n))}),i.find("img").on("mousedown",function(e){e.preventDefault()}),e(window).trigger("resize.twentytwenty")})},function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e,t){function n(e){function t(e){i?(n(),P(t),a=!0,i=!1):a=!1}var n=e,i=!1,a=!1;this.kick=function(e){i=!0,a||t()},this.end=function(e){var t=n;e&&(a?(n=i?function(){t(),e()}:e,i=!0):e())}}function i(){return!0}function a(){return!1}function o(e){e.preventDefault()}function r(e){H[e.target.tagName.toLowerCase()]||e.preventDefault()}function d(e){return 1===e.which&&!e.ctrlKey&&!e.altKey}function c(e,t){var n,i;if(e.identifiedTouch)return e.identifiedTouch(t);for(n=-1,i=e.length;++n<i;)if(e[n].identifier===t)return e[n]}function s(e,t){var n=c(e.changedTouches,t.identifier);if(n&&(n.pageX!==t.pageX||n.pageY!==t.pageY))return n}function l(e){var t;d(e)&&(t={target:e.target,startX:e.pageX,startY:e.pageY,timeStamp:e.timeStamp},j(document,K.move,u,t),j(document,K.cancel,f,t))}function u(e){var t=e.data;w(e,t,e,m)}function f(e){m()}function m(){N(document,K.move,u),N(document,K.cancel,f)}function p(e){var t,n;H[e.target.tagName.toLowerCase()]||(t=e.changedTouches[0],n={target:t.target,startX:t.pageX,startY:t.pageY,timeStamp:e.timeStamp,identifier:t.identifier},j(document,L.move+"."+t.identifier,v,n),j(document,L.cancel+"."+t.identifier,g,n))}function v(e){var t=e.data,n=s(e,t);n&&w(e,t,n,h)}function g(e){var t=e.data,n=c(e.changedTouches,t.identifier);n&&h(t.identifier)}function h(e){N(document,"."+e,v),N(document,"."+e,g)}function w(e,t,n,i){var a=n.pageX-t.startX,o=n.pageY-t.startY;R*R>a*a+o*o||X(e,t,n,a,o,i)}function y(){return this._handled=i,!1}function Y(e){e._handled()}function X(e,t,n,i,a,o){var r,d;t.target;r=e.targetTouches,d=e.timeStamp-t.timeStamp,t.type="movestart",t.distX=i,t.distY=a,t.deltaX=i,t.deltaY=a,t.pageX=n.pageX,t.pageY=n.pageY,t.velocityX=i/d,t.velocityY=a/d,t.targetTouches=r,t.finger=r?r.length:1,t._handled=y,t._preventTouchmoveDefault=function(){e.preventDefault()},O(t.target,t),o(t.identifier)}function b(e){var t=e.data.timer;e.data.touch=e,e.data.timeStamp=e.timeStamp,t.kick()}function S(e){var t=e.data.event,n=e.data.timer;T(),A(t,n,function(){setTimeout(function(){N(t.target,"click",a)},0)})}function T(e){N(document,K.move,b),N(document,K.end,S)}function k(e){var t=e.data.event,n=e.data.timer,i=s(e,t);i&&(e.preventDefault(),t.targetTouches=e.targetTouches,e.data.touch=i,e.data.timeStamp=e.timeStamp,n.kick())}function _(e){var t=e.data.event,n=e.data.timer,i=c(e.changedTouches,t.identifier);i&&(C(t),A(t,n))}function C(e){N(document,"."+e.identifier,k),N(document,"."+e.identifier,_)}function x(e,t,n,i){var a=n-e.timeStamp;e.type="move",e.distX=t.pageX-e.startX,e.distY=t.pageY-e.startY,e.deltaX=t.pageX-e.pageX,e.deltaY=t.pageY-e.pageY,e.velocityX=.3*e.velocityX+.7*e.deltaX/a,e.velocityY=.3*e.velocityY+.7*e.deltaY/a,e.pageX=t.pageX,e.pageY=t.pageY}function A(e,t,n){t.end(function(){return e.type="moveend",O(e.target,e),n&&n()})}function D(e,t,n){return j(this,"movestart.move",Y),!0}function q(e){return N(this,"dragstart drag",o),N(this,"mousedown touchstart",r),N(this,"movestart",Y),!0}function F(e){"move"!==e.namespace&&"moveend"!==e.namespace&&(j(this,"dragstart."+e.guid+" drag."+e.guid,o,t,e.selector),j(this,"mousedown."+e.guid,r,t,e.selector))}function z(e){"move"!==e.namespace&&"moveend"!==e.namespace&&(N(this,"dragstart."+e.guid+" drag."+e.guid),N(this,"mousedown."+e.guid))}var R=6,j=e.event.add,N=e.event.remove,O=function(t,n,i){e.event.trigger(n,i,t)},P=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return window.setTimeout(function(){e()},25)}}(),H={textarea:!0,input:!0,select:!0,button:!0},K={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},L={move:"touchmove",cancel:"touchend",end:"touchend"};e.event.special.movestart={setup:D,teardown:q,add:F,remove:z,_default:function(e){function i(t){x(o,r.touch,r.timeStamp),O(e.target,o)}var o,r;e._handled()&&(o={target:e.target,startX:e.startX,startY:e.startY,pageX:e.pageX,pageY:e.pageY,distX:e.distX,distY:e.distY,deltaX:e.deltaX,deltaY:e.deltaY,velocityX:e.velocityX,velocityY:e.velocityY,timeStamp:e.timeStamp,identifier:e.identifier,targetTouches:e.targetTouches,finger:e.finger},r={event:o,timer:new n(i),touch:t,timeStamp:t},e.identifier===t?(j(e.target,"click",a),j(document,K.move,b,r),j(document,K.end,S,r)):(e._preventTouchmoveDefault(),j(document,L.move+"."+e.identifier,k,r),j(document,L.end+"."+e.identifier,_,r)))}},e.event.special.move={setup:function(){j(this,"movestart.move",e.noop)},teardown:function(){N(this,"movestart.move",e.noop)}},e.event.special.moveend={setup:function(){j(this,"movestart.moveend",e.noop)},teardown:function(){N(this,"movestart.moveend",e.noop)}},j(document,"mousedown.move",l),j(document,"touchstart.move",p),"function"==typeof Array.prototype.indexOf&&!function(e,t){for(var n=["changedTouches","targetTouches"],i=n.length;i--;)-1===e.event.props.indexOf(n[i])&&e.event.props.push(n[i])}(e)})}(jQuery);